[gd_scene load_steps=22 format=3 uid="uid://b77ufvx0kverl"]

[ext_resource type="Script" path="res://DeckSystem/scripts/draw_machine.gd" id="1_uug5s"]
[ext_resource type="Resource" uid="uid://k3kkpsyl26go" path="res://DeckSystem/res/draw_machine_params.tres" id="2_6xdhb"]
[ext_resource type="Script" path="res://DeckSystem/scripts/card_pile.gd" id="2_uhb1w"]
[ext_resource type="Script" path="res://DeckSystem/scripts/initializer.gd" id="4_rlxfo"]
[ext_resource type="Script" path="res://DeckSystem/scripts/conveyor_belt.gd" id="5_2yeou"]
[ext_resource type="Script" path="res://DeckSystem/scripts/conveyor_cursor.gd" id="5_5ehfm"]
[ext_resource type="Script" path="res://DeckSystem/scripts/conveyor_input.gd" id="5_m3tqt"]
[ext_resource type="Resource" uid="uid://q66wqv5ap4h3" path="res://DeckSystem/res/input_params.tres" id="6_l0rdh"]
[ext_resource type="Script" path="res://DeckSystem/scripts/conveyor_engine_pressure.gd" id="8_65gfg"]
[ext_resource type="Script" path="res://DeckSystem/scripts/discard_trigger.gd" id="9_7pk0c"]
[ext_resource type="Resource" uid="uid://jl8xycbq1i3v" path="res://DeckSystem/res/cursor_params.tres" id="9_hbfni"]
[ext_resource type="Resource" uid="uid://bot4oo3bc224u" path="res://DeckSystem/res/conveyor_engine_pressure_params.tres" id="9_wwwca"]
[ext_resource type="Resource" uid="uid://hl3ytboesg3u" path="res://DeckSystem/res/conveyor_res.tres" id="11_ikrmt"]
[ext_resource type="Shape2D" uid="uid://ddwm33113h1iw" path="res://DeckSystem/res/conveyor_shape.tres" id="12_8jy8x"]
[ext_resource type="Script" path="res://DeckSystem/scripts/jettison_trigger.gd" id="13_tcl74"]
[ext_resource type="Script" path="res://PlayerResources/grease_script.gd" id="16_wsfom"]
[ext_resource type="Script" path="res://PlayerResources/engine_pressure_script.gd" id="16_yvhlj"]
[ext_resource type="Resource" uid="uid://drx1xa7c7sg03" path="res://PlayerResources/res/grease_params.tres" id="17_3id5b"]
[ext_resource type="Resource" uid="uid://dq8p2jvcwjecm" path="res://PlayerResources/res/engine_pressure_params.tres" id="17_d0nlo"]

[sub_resource type="RectangleShape2D" id="RectangleShape2D_tinjm"]
size = Vector2(18.6229, 22.3692)

[sub_resource type="RectangleShape2D" id="RectangleShape2D_5oarr"]

[node name="DeckSystem" type="Node2D"]

[node name="DrawMachine" type="Node2D" parent="." node_paths=PackedStringArray("draw_pile", "discard_pile")]
position = Vector2(527, 43)
script = ExtResource("1_uug5s")
params = ExtResource("2_6xdhb")
draw_pile = NodePath("../DrawPile")
discard_pile = NodePath("../DiscardPile")

[node name="DrawPile" type="Node" parent="."]
script = ExtResource("2_uhb1w")

[node name="Initializer" type="Node" parent="DrawPile" node_paths=PackedStringArray("card_pile", "discard_pile")]
script = ExtResource("4_rlxfo")
card_pile = NodePath("..")
discard_pile = NodePath("../../DiscardPile")

[node name="DiscardPile" type="Node" parent="."]
script = ExtResource("2_uhb1w")

[node name="ConveyorBelt" type="Node2D" parent="."]

[node name="Input" type="Node" parent="ConveyorBelt" node_paths=PackedStringArray("conveyor_cursor", "conveyor")]
script = ExtResource("5_m3tqt")
params = ExtResource("6_l0rdh")
conveyor_cursor = NodePath("../PlayCursor")
conveyor = NodePath("../Conveyor")

[node name="EnginePressure" type="Node" parent="ConveyorBelt" node_paths=PackedStringArray("engine_pressure", "conveyor_belt")]
script = ExtResource("8_65gfg")
engine_pressure = NodePath("../../EnginePressure")
params = ExtResource("9_wwwca")
conveyor_belt = NodePath("../Conveyor")

[node name="PlayCursor" type="RayCast2D" parent="ConveyorBelt" node_paths=PackedStringArray("grease_tank")]
position = Vector2(133, 5)
exclude_parent = false
collision_mask = 64
hit_from_inside = true
collide_with_areas = true
collide_with_bodies = false
script = ExtResource("5_5ehfm")
params = ExtResource("9_hbfni")
grease_tank = NodePath("../../GreaseTank")

[node name="Conveyor" type="Area2D" parent="ConveyorBelt"]
position = Vector2(316, 44)
collision_layer = 16
collision_mask = 0
monitoring = false
script = ExtResource("5_2yeou")
params = ExtResource("11_ikrmt")

[node name="CollisionShape2D" type="CollisionShape2D" parent="ConveyorBelt/Conveyor"]
shape = ExtResource("12_8jy8x")

[node name="JettisonTrigger" type="Area2D" parent="ConveyorBelt"]
position = Vector2(57, 44)
scale = Vector2(-1.62359, 4.29162)
collision_layer = 64
collision_mask = 64
script = ExtResource("13_tcl74")

[node name="CollisionShape2D" type="CollisionShape2D" parent="ConveyorBelt/JettisonTrigger"]
position = Vector2(0.688568, 0.233014)
shape = SubResource("RectangleShape2D_tinjm")

[node name="DiscardTrigger" type="Area2D" parent="ConveyorBelt"]
position = Vector2(-32, -131)
scale = Vector2(36.8114, 6.74649)
collision_layer = 64
collision_mask = 64
script = ExtResource("9_7pk0c")

[node name="CollisionShape2D" type="CollisionShape2D" parent="ConveyorBelt/DiscardTrigger"]
shape = SubResource("RectangleShape2D_5oarr")

[node name="EnginePressure" type="Node" parent="."]
script = ExtResource("16_yvhlj")
params = ExtResource("17_d0nlo")

[node name="GreaseTank" type="Node" parent="."]
script = ExtResource("16_wsfom")
params = ExtResource("17_3id5b")

[connection signal="area_entered" from="ConveyorBelt/JettisonTrigger" to="ConveyorBelt/JettisonTrigger" method="_on_area_entered"]
[connection signal="area_entered" from="ConveyorBelt/DiscardTrigger" to="ConveyorBelt/DiscardTrigger" method="_on_area_entered"]
